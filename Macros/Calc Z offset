if !move.axes[0].homed || !move.axes[1].homed || !move.axes[2].homed
  G28

M290 R0 S0			; clear any baby stepping
M561				; clear any bed transform
M402				; Make sure probe is stored
G1 Z10				; set a known height
M564 S0 H1			; allow movment below previous Z=0 
M291 P"Jog nozzle to touch bed" R"Set nozzle to zero" S3 Z1
G92 Z0

M291 P"Press OK to begin" R"Ready?" S3; 
G1 Z15				; move up enough get the probe must be more than 12mm
M400
M401				; get the probe
while iterations <= 9
	G1 Z15				; move up enough to detrigger the probe
	M400
	G30 S-1				; probe the bed
	M400

G1 Z15
M291 P"Check console for results and enter average value in G31 Z parameter of config.g"  R"Finished" S3
M564 S1 H1 				; Reset enforcement on limits
M402 					;store probe